<!DOCTYPE html>
<html lang="en">
<head>
  <title> classes dynamic</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {  }
      
      
    .item-btn {margin-right: 5px;}
    .item-div {margin-bottom:4px;}

    .inactive-btn {border:1px solid rgb(143,143,157); border-radius: 9999px;
             background-color: rgb(233,233,237); padding: 2px 5px; 
             cursor: pointer; min-width: 180px;}
    
    .inactive-btn:active {background-color: #d5d5dd;}
    .inactive-btn:hover {border:1px solid rgb(0,0,0);}

    /* The class to disable the hover effect */
    .disabled-btn:hover {
    /* Set the background-color to what it should be when disabled,
    or use !important to ensure it overrides the :hover style */
    border:1px solid rgb(143,143,157) !important; 
    cursor: default;}

    .counter {margin-right: 10px; min-width: 10px; padding: 1px 4px; 
              background-color: rgb(233,233,237); border-radius: 4px; 
              color: rgb(233,233,237); font-family: Arial, Helvetica, sans-serif; } 

    .inactive-counter { border:none  !important ;
                        background-color: rgb(233,233,237) !important;
                        color: rgb(233,233,237) !important ; }
    .active-counter { color: black; } 
    .active-counter-limit { color: black; border: 1px solid red;
                              background-color: #ffe6e6;}


  </style>
</head>
<body>

<div class="section" id="s1">

<p>Proteins 
  <span>count: </span>
  <span class="counter inactive-counter" id="s1c">
    0</span>
</p>
<p>(choose 2)</p>

<div class="item-div">
  <button id="i1" class="item-btn inactive-btn ">Item 1</button>
  <span id="i1c" class="counter inactive-counter">0</span>
</div>

<div class="item-div">
  <button id="i2" class="item-btn inactive-btn">Item 2</button>
  <span id="i2c" class="counter inactive-counter" >0</span>
</div>

<div class="item-div">
  <button id="i3" class="item-btn inactive-btn">Item 3</button>
  <span id="i3c" class="counter inactive-counter" >0</span>
</div>

<div class="item-div">
  <button id="i4" class="item-btn inactive-btn">Item 4</button>
  <span id="i4c" class="counter inactive-counter" >0</span>
</div>

</div> <!--section 1 end-->

<script>

const s1 = {
  name : 'Proteins',
  count : 0,
  limit : 2,
  limit_reached : false,
  counter : document.querySelector('#s1c'),
};

const item1 = {
  name : 'Tilapia',
  count : 0,
  limit : null,
  selected : false,
  limit_reached : false,
  button : document.querySelector('#i1'),
  counter : document.querySelector('#i1c'),
};
const item2 = {
  name : 'Chicken Breast',
  count : 0,
  limit : null,
  selected : false,
  limit_reached : false,
  button : document.querySelector('#i2'),
  counter : document.querySelector('#i2c'),
};
const item3 = {
  name : 'Pork Chop',
  count : 0,
  limit : null,
  selected : false,
  limit_reached : false,
  button : document.querySelector('#i3'),
  counter : document.querySelector('#i3c'),
};
const item4 = {
  name : 'Tempeh',
  count : 0,
  limit : null,
  selected : false,
  limit_reached : false,
  button : document.querySelector('#i4'),
  counter : document.querySelector('#i4c'),
};

item1.button.addEventListener('click', () => {
  select();
});

item1.button.innerHTML = item1.name;
item2.button.innerHTML = item2.name;
item3.button.innerHTML = item3.name;
item4.button.innerHTML = item4.name;

function select() {
  if (s1.count == s1.limit) {
    deactivate(s1); 
    deactivate(item1);
    s1.count = s1.count - item1.count;
    item1.count = 0;
    
    item1.selected = false;
    s1.limit_reached = false;
    item1.limit_reached = false;
    item1.counter.innerHTML = item1.count;
    s1.counter.innerHTML = item1.count;
    console.log("item 1 count: " + item1.count);
    console.log("s1 count: " + s1.count);
  }

  else if (item1.count == 0) {
    activate(item1);
    if (s1.count == 0) { activate(s1); }
    item1.count++;
    item1.selected = true;
    s1.count++;
    item1.counter.textContent = item1.count;
    s1.counter.textContent = item1.count;
    console.log("item 1 count: " + item1.count);
    console.log("s1 count: " + s1.count);
    } else {
    item1.count++;
    item1.selected = true;
    s1.count++;
    item1.counter.textContent = item1.count;
    s1.counter.textContent = item1.count;
    console.log("item 1 count: " + item1.count);
    console.log("s1 count: " + s1.count);
  }
  if (s1.count == s1.limit) {
    s1.limit_reached = true;
    item1.limit_reached = true;
    limit_reached_loop();
  }
}

function activate(element) {
  element.counter.classList.remove('inactive-counter');
  element.counter.classList.add('active-counter');
}
function deactivate(element) {
  element.counter.classList.remove('active-counter');
  element.counter.classList.add('inactive-counter');
}
function activate_limit(element) {
  element.counter.classList.remove('active-counter');
  element.counter.classList.add('active-counter-limit');
}
function limit_reached_loop() {
  activate_limit(s1);
  disable_unselected_items();
  // Loop through IDs and disable
  s1_items.forEach(item => {
    if (item.limit_reached) {
      activate_limit(item);
    }
  });
}
// Array of button IDs
const s1_items = [item1, item2, item3, item4];

function disable_unselected_items() {
// Loop through IDs and disable
s1_items.forEach(item => {
  if (!item.selected) {
    item.button.disabled = true; // Sets the disabled attribute to true
    item.button.classList.add('disabled-btn');
  }
});
}











</script>
</body>
</html>
